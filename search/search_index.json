{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"\u041f\u043e\u0448\u0430\u0433\u043e\u0432\u043e\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u0434\u0435\u043f\u043b\u043e\u0439 \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440 \u0441 \u043f\u043e\u043c\u043e\u0449\u044e Docker","text":""},{"location":"index.html#_1","title":"\u0428\u0430\u0433 \u043f\u0435\u0440\u0432\u044b\u0439","text":"<ul> <li>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0438\u043d\u0441\u0442\u043d\u0430\u0441 \u043d\u0430 AWS: \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435</li> <li>\u0412 \u043d\u0451\u043c \u0436\u0435 \u0441\u0440\u0430\u0437\u0443 \u0433\u0435\u043d\u0435\u0440\u0438\u0442\u044c ssh \u043a\u043b\u044e\u0447 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u044d\u0442\u043e \u043d\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0438\u043d\u0441\u0442\u0430\u043d\u0441\u0443 \u0447\u0435\u0440\u0435\u0437 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b </li> <li>\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445 Postgresql AWS: \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435</li> <li>\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c credentials \u0433\u0434\u0435 \u043d\u0438\u0431\u0443\u0434\u044c \u0432 \u043d\u0430\u0434\u0435\u0436\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435.</li> </ul>"},{"location":"index.html#_2","title":"\u0428\u0430\u0433 \u0432\u0442\u043e\u0440\u043e\u0439","text":"<ul> <li>\u0412\u043e\u0439\u0442\u0438 \u0432 \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u044b  </li> </ul> <pre><code>ssh -i &lt;\u043f\u0443\u0442\u044c_\u043a_ssh_\u043a\u043b\u044e\u0447\u0443.pem&gt; &lt;instance_user&gt;@&lt;ip_\u0430\u0434\u0440\u0435\u0441_instance&gt;\n</code></pre> <ul> <li>\u0415\u0441\u043b\u0438 \u0432\u044b\u0434\u0430\u043b\u043e \u043e\u0448\u0438\u0431\u043a\u0443 \u043f\u043e \u0442\u0438\u043f\u0443 \u0414\u043e\u0441\u0442\u0443\u043f \u043e\u0433\u0440\u0440\u0430\u043d\u0438\u0447\u0435\u043d \u0432\u043e\u0441\u043f\u043e\u043b\u0437\u0443\u0439\u0441\u044f \u043a\u043e\u043c\u043c\u0430\u043d\u0434\u043e\u0439 \u043d\u0438\u0436\u0435 </li> </ul> <pre><code>chmod 600 \u043f\u0443\u0442\u044c_\u043a_ssh_\u043a\u043b\u044e\u0447\u0443.pem   # \u044d\u0442\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u043a\u043b\u044e\u0447\u0430 \u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430\n</code></pre> <ul> <li>\u041e\u0431\u043d\u043e\u0432\u0438\u043c \u041e\u0421 \u0438 \u0443\u0441\u0442\u043d\u043e\u0432\u0438\u043c Docker </li> </ul> <pre><code>sudo yum update -y\nsudo yum install -y docker \nsudo systemctl start docker\nsudo systemctl enable docker\n</code></pre> <ul> <li>\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 Docker (\u0447\u0442\u043e\u0431\u044b \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>sudo</code>)</li> </ul> <pre><code>sudo usermod -aG docker $USER   # \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c User\nnewgrp docker   # \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\n\n# \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430\ndocker --version\n&gt;&gt;&gt; Docker version 27.4.0\n\ndocker run hello-world\n&gt;&gt;&gt; Hello from Docker!\n</code></pre> <ul> <li>\u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c <code>docker-compose</code></li> </ul> <pre><code>sudo curl -L \"https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n\nsudo chmod +x /usr/local/bin/docker-compose\n\ndocker-compose --version\n&gt;&gt;&gt; Docker Compose version v...\n</code></pre> <ul> <li>\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c GIT:</li> </ul> <pre><code>sudo yum install -y git\n\ngit --version\n&gt;&gt;&gt; git version 2.39.3\n</code></pre>"},{"location":"index.html#_3","title":"\u0428\u0430\u0433 \u0442\u0440\u0435\u0442\u0438\u0439","text":"<ul> <li>\u041a\u043b\u043e\u043d\u0438\u0440\u0443\u0435\u043c \u043f\u0440\u043e\u0435\u043a\u0442 \u0438\u0437 Github <code>git clone &lt;\u0441\u0441\u044b\u043a\u0430 \u043d\u0430 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439&gt;</code></li> </ul> <pre><code># \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u0432 \u043f\u0430\u043f\u043a\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\ncd &lt;\u043f\u0443\u0442\u044c \u043a \u043f\u0430\u043f\u043a\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430&gt;\n\n# \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c Dockerfile\ntouch Dockerfile\n\n#  \u041e\u0442\u043a\u0440\u043e\u0435\u043c \u0435\u0433\u043e \u0432 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435 Vim\nvim Dockerfile\n</code></pre> <p>\u0441\u0442\u0430\u0432\u0438\u043c \u043a\u043e\u0434 \u043d\u0438\u0436\u0435 </p> <pre><code># \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0437 Python\nFROM python:3.9-slim\n\n# \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0440\u0430\u0431\u043e\u0447\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e\nWORKDIR /app\n\nENV PYTHONDONTWRITEBYTECODE 1\nENV PYTHONUNBUFFERED 1\n\nRUN pip install --upgrade pip\n\n# \u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438\nCOPY requirements.txt .\n\n# \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438\nRUN pip install -r requirements.txt\n\n# \u041a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438\nCOPY . .\n\n# \u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u043c \u043f\u043e\u0440\u0442 8000\nEXPOSE 8000\n\n# \u0417\u0430\u043f\u0443\u0441\u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0430 Django\nCMD [\"gunicorn\", \"--bind\", \"0.0.0.0:8000\", \"config.wsgi:application\"]\n</code></pre> <p>\u0438 \u0432\u044b\u0439\u0434\u0435\u043c \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0432 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f</p> <ul> <li>\u0412\u0435\u0440\u043d\u0435\u043c\u0441\u044f \u0432 \u043a\u043e\u0440\u043d\u0435\u0432\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <code>cd ..</code></li> <li>C\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0430\u043f\u043a\u0443 \u0434\u043b\u044f Nginx</li> </ul> <pre><code>mkdir Nginx\n\n# \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043d\u0430 \u043f\u0430\u043f\u043a\u0443 Nginx\ncd Nginx/\n\n# C\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439 Nginx\ntouch nginx.conf\n\n# \u041e\u0442\u043a\u0440\u043e\u0435\u043c \u0444\u0430\u0439\u043b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Vim\nvim nginx.conf\n</code></pre> <p>\u0441\u0442\u0430\u0432\u0438\u043c \u043a\u043e\u0434 \u043d\u0438\u0436\u0435:</p> <pre><code>worker_processes 1;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n\n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n\n    types_hash_max_size 2048;\n\n    upstream django {\n        server django-backend:8000;  # \u0418\u043c\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u0438\u0437 docker-compose\n    }\n    listen 80;\n         server_name &lt;\u0443\u043a\u0430\u0436\u0435\u043c \u0434\u043e\u043c\u0435\u043d\u043d\u043e\u0435 \u0438\u043c\u044f&gt;;\n\n    location = /favicon.ico { \n        access_log off; log_not_found off; \n        }\n\n    location /static/ {\n        alias /home/admin/assistant/static/;\n    } # \u0434\u043b\u044f \u0431\u044b\u0441\u0442\u0440\u043e\u0439 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0441\u0442\u0430\u0442\u0438\u043a\u0430\n\n    location /.well-known/acme-challenge/ {\n        root /var/www/certbot; # \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f ssl \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432\n        autoindex on;\n        }\n\n    location / {\n        proxy_pass http://django; # \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0438\u0437 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 upstream\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n}\n</code></pre> <p>\u0432\u044b\u0439\u0434\u0435\u043c \u0438\u0437 Vim \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0432 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0438 \u0432\u0435\u0440\u043d\u0435\u043c\u0441\u044f \u043a\u043e\u0440\u043d\u0435\u0432\u0443\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e <code>cd ..</code></p> <ul> <li>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 <code>docker-compose.yml</code> \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430  ```py</li> </ul>"},{"location":"index.html#docker-composeyml","title":"\u0421\u043e\u0437\u0434\u0430\u0435\u043c docker-compose.yml","text":"<p>touch docker-compose.yml</p>"},{"location":"index.html#vim","title":"\u041e\u0442\u043a\u0440\u043e\u0435\u043c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Vim","text":"<p>vim docker-compose.yml  ``` \u0441\u0442\u0430\u0432\u0438\u043c \u043a\u043e\u0434 \u043d\u0438\u0436\u0435</p> <pre><code>version: '3.8'\n\nservices:\n  nginx:\n    image: nginx:alpine    # \u041e\u0431\u0440\u0430\u0437 Nginx\n    container_name: nginx  # \u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\n    restart: unless-stopped  # \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0430\u0432\u0442\u043e\u0437\u0430\u043f\u0443\u0441\u043a\u0430 (\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442 \u043a\u043e\u0433\u0434\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f \u0441\u0435\u0440\u0432\u0435\u0440)\n    ports:\n      - \"80:80\"  # \u043f\u0435\u0440\u0435\u0431\u0440\u043e\u0441\u043a\u0430 \u043f\u043e\u0440\u0442\u0430 \u0434\u043b\u044f http\n      - \"443:443\"  # \u043f\u0435\u0440\u0435\u0431\u0440\u043e\u0441\u043a\u0430 \u043f\u043e\u0440\u0442\u0430 \u0434\u043b\u044f https\n    volumes:\n      - ./nginx/nginx.conf:/etc/nginx/nginx.conf  # \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435\n\n    depends_on:\n      - django   # \u041d\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043f\u043e\u043a\u0430 \u043d\u0435 \u0437\u0430\u043f\u0443\u0448\u0435\u043d \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \"djnago\"\n    networks:\n      - backend \n\n  django:\n    build:\n      context: ./dajngo-backend   # \u041a\u043e\u043d\u0435\u0442\u043a\u0441 \u0442\u043e \u0435\u0441\u0442\u044c \u043f\u0443\u0442\u044c \u043a \u0414\u043e\u043a\u0435\u0440\u0444\u0430\u0439\u043b\u0443\n      dockerfile: Dockerfile    # \u0414\u043e\u043a\u0435\u0440\u0444\u0430\u0439\u043b\n    container_name: django-backend   # \u0418\u043c\u044f \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\n    restart: unless-stopped    # \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0430\u0432\u0442\u043e\u0437\u0430\u043f\u0443\u0441\u043a\u0430 (\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442 \u043a\u043e\u0433\u0434\u0430 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f \u0441\u0435\u0440\u0432\u0435\u0440)\n    volumes:\n      - ./django-backend:/app # \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0441 \u043a\u043e\u0434\u043e\u043c \u0432 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0435\n    expose:\n      - \"8000\"   # \u043f\u0435\u0440\u0435\u0431\u0440\u043e\u0441\u043a\u0430 \u043f\u043e\u0440\u0442\u0430\n    environment:  # \u0441\u043e\u0437\u0434\u0430\u0435\u043c .env \u0444\u0430\u0439\u043b \u0432\u043d\u0443\u0442\u0440\u0438 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u0430\n      - DEBUG=1  \n      - DB_HOST=&lt;\u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445&gt;  # \u0443\u043a\u0430\u0436\u0435\u043c \u044d\u043d\u0434\u043f\u043e\u0438\u043d\u0442 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445\n      - DB_PORT=5432    # \u0443\u043a\u0430\u0436\u0435\u043c \u043f\u043e\u0440\u0442 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e 5432\n      - DB_NAME=&lt;\u0438\u043c\u044f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b&gt;  # \u0443\u043a\u0430\u0436\u0435\u043c \u0438\u043c\u044f \u0411\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \n      - DB_USER=&lt;user \u0434\u043b\u044f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445&gt; # \u0443\u043a\u0430\u0436\u0435\u043c \u0438\u043c\u044f \u044e\u0437\u0435\u0440\u0430 \u0434\u043b\u044f \u0431\u0430\u0437 \u0434\u0430\u043d\u043d\u044b\u0445\n      - DB_PASSWORD=&lt;\u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445&gt; # \u0443\u043a\u0430\u0436\u0435\u043c  \u043f\u0430\u0440\u043e\u043b\u044c \u043a \u044e\u0437\u0435\u0440\u0443\n    networks:\n      - backend\n\nnetworks:\n  backend:\n    driver: bridge\n</code></pre> <p>\u0432\u044b\u0439\u0434\u0435\u043c \u0438\u0437 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430 Vim \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0432 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f.</p>"}]}